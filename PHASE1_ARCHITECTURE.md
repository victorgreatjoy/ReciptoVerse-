# ğŸ—ï¸ Phase 1 Architecture Diagram

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER LAYER                                â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Mobile  â”‚  â”‚   Web    â”‚  â”‚   POS    â”‚  â”‚   API    â”‚       â”‚
â”‚  â”‚   App    â”‚  â”‚  Client  â”‚  â”‚  System  â”‚  â”‚  Client  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚            â”‚             â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       API LAYER                                  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           Express.js REST API Server                      â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚   Receipt    â”‚  â”‚    User      â”‚  â”‚    NFT       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   Routes     â”‚  â”‚   Routes     â”‚  â”‚   Routes     â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚         â”‚                 â”‚                 â”‚             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚       HCS Receipt Routes (Phase 1 NEW!)           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  POST /receipts/:id/anchor                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  GET  /receipts/:id/verify                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  GET  /receipts/:id/proof                         â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SERVICE LAYER                                  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         HCS Receipt Service (Phase 1)                    â”‚  â”‚
â”‚  â”‚  â€¢ generateReceiptHash()                                 â”‚  â”‚
â”‚  â”‚  â€¢ anchorReceipt()                                       â”‚  â”‚
â”‚  â”‚  â€¢ verifyReceipt()                                       â”‚  â”‚
â”‚  â”‚  â€¢ getReceiptProof()                                     â”‚  â”‚
â”‚  â”‚  â€¢ bulkAnchorReceipts()                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              DLT Gateway (Phase 1)                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚     HCS     â”‚  â”‚     HTS     â”‚  â”‚    HSCS     â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  Methods    â”‚  â”‚  Methods    â”‚  â”‚  Methods    â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  (Active)   â”‚  â”‚ (Phase 2)   â”‚  â”‚ (Phase 3)   â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚         â”‚                                                 â”‚  â”‚
â”‚  â”‚  â€¢ publishToHCS()                                        â”‚  â”‚
â”‚  â”‚  â€¢ subscribeToHCS()                                      â”‚  â”‚
â”‚  â”‚  â€¢ getHCSMessages()                                      â”‚  â”‚
â”‚  â”‚  â€¢ createToken()         â† Ready for Phase 2            â”‚  â”‚
â”‚  â”‚  â€¢ mintNFT()             â† Ready for Phase 2            â”‚  â”‚
â”‚  â”‚  â€¢ callContract()        â† Ready for Phase 3            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATABASE LAYER      â”‚   â”‚   BLOCKCHAIN LAYER                   â”‚
â”‚                      â”‚   â”‚                                      â”‚
â”‚  PostgreSQL/SQLite   â”‚   â”‚   Hedera Network (Testnet)          â”‚
â”‚                      â”‚   â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   receipts     â”‚ â”‚   â”‚  â”‚  Hedera Consensus Service      â”‚ â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚ â”‚   â”‚  â”‚  (HCS)                         â”‚ â”‚
â”‚  â”‚   â€¢ id         â”‚ â”‚   â”‚  â”‚                                â”‚ â”‚
â”‚  â”‚   â€¢ user_id    â”‚ â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚   â€¢ total      â”‚ â”‚   â”‚  â”‚  â”‚  Receipt Topic           â”‚ â”‚ â”‚
â”‚  â”‚   â€¢ items      â”‚ â”‚   â”‚  â”‚  â”‚  ID: 0.0.XXXXX           â”‚ â”‚ â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚ â”‚   â”‚  â”‚  â”‚                          â”‚ â”‚ â”‚
â”‚  â”‚   NEW FIELDS:  â”‚ â”‚   â”‚  â”‚  â”‚  Messages:               â”‚ â”‚ â”‚
â”‚  â”‚   â€¢ hcs_topic  â”‚â—„â”œâ”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤  - Receipt Hash          â”‚ â”‚ â”‚
â”‚  â”‚   â€¢ hcs_seq    â”‚â—„â”œâ”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤  - Timestamp             â”‚ â”‚ â”‚
â”‚  â”‚   â€¢ hcs_ts     â”‚â—„â”œâ”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤  - Merchant ID (hashed)  â”‚ â”‚ â”‚
â”‚  â”‚   â€¢ receipt_   â”‚â—„â”œâ”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤  - Total Amount          â”‚ â”‚ â”‚
â”‚  â”‚     hash       â”‚ â”‚   â”‚  â”‚  â”‚  - Currency              â”‚ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚                      â”‚   â”‚  â”‚                                â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”‚  Running Hash Chain:          â”‚ â”‚
â”‚  â”‚  hcs_events    â”‚ â”‚   â”‚  â”‚  Message 1 â†’ Message 2 â†’      â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚ â”‚   â”‚  â”‚  Message 3 â†’ ...              â”‚ â”‚
â”‚  â”‚  â€¢ topic_id    â”‚ â”‚   â”‚  â”‚  (Immutable, Tamper-Proof)    â”‚ â”‚
â”‚  â”‚  â€¢ sequence    â”‚ â”‚   â”‚  â”‚                                â”‚ â”‚
â”‚  â”‚  â€¢ timestamp   â”‚ â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚  â€¢ message     â”‚ â”‚   â”‚                                      â”‚
â”‚  â”‚  â€¢ processed   â”‚ â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â”‚  Mirror Node API               â”‚ â”‚
â”‚                      â”‚   â”‚  â”‚  (Query Historical Data)       â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”‚                                â”‚ â”‚
â”‚  â”‚  hcs_topics    â”‚ â”‚   â”‚  â”‚  GET /topics/{id}/messages     â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚ â”‚   â”‚  â”‚  GET /transactions/{id}        â”‚ â”‚
â”‚  â”‚  â€¢ topic_id    â”‚ â”‚   â”‚  â”‚  GET /accounts/{id}            â”‚ â”‚
â”‚  â”‚  â€¢ purpose     â”‚ â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚  â€¢ created_at  â”‚ â”‚   â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## Data Flow: Receipt Anchoring

```
1. USER UPLOADS RECEIPT
   â†“
2. BACKEND VALIDATES & STORES IN DB
   â”‚
   â”œâ”€â†’ receipts table (full data)
   â”‚   â€¢ Image, OCR data, items, etc.
   â”‚
   â””â”€â†’ CALL: hcsService.anchorReceipt()
       â†“
3. GENERATE RECEIPT HASH
   â”‚
   â””â”€â†’ SHA-256 of: {id, merchant, total, date, items}
       â†“
4. PREPARE PRIVACY-SAFE DATA
   â”‚
   â””â”€â†’ {receiptId, hash, timestamp, merchantId (hashed), total, currency}
       â†“
5. DLT GATEWAY â†’ HEDERA HCS
   â”‚
   â””â”€â†’ publishToHCS(receiptTopicId, data)
       â†“
6. HEDERA NETWORK PROCESSES
   â”‚
   â”œâ”€â†’ Consensus reached
   â”œâ”€â†’ Message added to topic
   â”œâ”€â†’ Running hash updated
   â””â”€â†’ Timestamp assigned
       â†“
7. STORE HCS METADATA IN DB
   â”‚
   â””â”€â†’ UPDATE receipts SET
       hcs_topic_id = ...,
       hcs_sequence = ...,
       hcs_timestamp = ...,
       receipt_hash = ...
       â†“
8. RETURN PROOF TO USER
   â”‚
   â””â”€â†’ {receiptHash, hcsTopicId, hcsSequence, hcsTimestamp}
```

---

## Data Flow: Receipt Verification

```
1. USER REQUESTS VERIFICATION
   â”‚
   â””â”€â†’ GET /api/receipts/{id}/verify
       â†“
2. FETCH RECEIPT FROM DATABASE
   â”‚
   â””â”€â†’ SELECT * FROM receipts WHERE id = ...
       â†“
3. FETCH HCS MESSAGE
   â”‚
   â””â”€â†’ Mirror Node API: GET /topics/{topicId}/messages/{sequence}
       â†“
4. COMPARE HASHES
   â”‚
   â”œâ”€â†’ Database hash: abc123...
   â”œâ”€â†’ HCS hash: abc123...
   â””â”€â†’ Match? YES/NO
       â†“
5. RETURN VERIFICATION RESULT
   â”‚
   â””â”€â†’ {isValid: true/false, proof: {...}}
```

---

## Component Interactions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PHASE 1 COMPONENTS                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

API Routes (hcsReceipts.js)
        â”‚
        â”‚ calls
        â–¼
HCS Receipt Service (hcsReceiptService.js)
        â”‚
        â”‚ uses
        â–¼
DLT Gateway (dltGateway.js)
        â”‚
        â”‚ interacts with
        â–¼
Hedera SDK (@hashgraph/sdk)
        â”‚
        â”‚ sends transactions to
        â–¼
Hedera Network (HCS, HTS, HSCS)
        â”‚
        â”‚ consensus data available via
        â–¼
Mirror Node API
        â”‚
        â”‚ queries by
        â–¼
DLT Gateway
        â”‚
        â”‚ returns data to
        â–¼
HCS Receipt Service
        â”‚
        â”‚ stores in
        â–¼
Database (receipts, hcs_events, hcs_topics)
```

---

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PRIVACY LAYERS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ON-CHAIN (Public, Immutable)
â”œâ”€ Receipt Hash (SHA-256)        âœ… Verification only
â”œâ”€ Merchant ID (Hashed)           âœ… Privacy-preserving
â”œâ”€ User ID (Hashed)               âœ… Privacy-preserving
â”œâ”€ Total Amount                   âœ… Aggregate data
â”œâ”€ Currency                       âœ… Public info
â””â”€ Item Count                     âœ… Aggregate data

OFF-CHAIN (Private, Access-Controlled)
â”œâ”€ User personal info             ğŸ”’ Database only
â”œâ”€ Merchant details               ğŸ”’ Database only
â”œâ”€ Receipt images                 ğŸ”’ Database only
â”œâ”€ OCR data                       ğŸ”’ Database only
â”œâ”€ Item descriptions              ğŸ”’ Database only
â””â”€ Payment methods                ğŸ”’ Database only

VERIFICATION LINK
â””â”€ Receipt Hash connects on-chain â†” off-chain data
   (Anyone can verify hash, only authorized users see details)
```

---

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PRODUCTION SETUP                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Railway/Heroku/AWS]
        â”‚
        â”œâ”€ Backend API Server
        â”‚   â”œâ”€ DLT Gateway Service
        â”‚   â”œâ”€ HCS Receipt Service
        â”‚   â””â”€ API Routes
        â”‚
        â”œâ”€ PostgreSQL Database
        â”‚   â”œâ”€ receipts table
        â”‚   â”œâ”€ hcs_events table
        â”‚   â””â”€ hcs_topics table
        â”‚
        â””â”€ Environment Variables
            â”œâ”€ HEDERA_OPERATOR_ID
            â”œâ”€ HEDERA_OPERATOR_KEY
            â”œâ”€ HCS_RECEIPT_TOPIC_ID
            â””â”€ HEDERA_NETWORK=mainnet

[Hedera Mainnet]
        â”‚
        â”œâ”€ HCS Topic (Receipt Anchoring)
        â”œâ”€ Consensus Nodes (Decentralized)
        â””â”€ Mirror Nodes (Query API)

[External Verifiers]
        â”‚
        â””â”€ Can query Mirror Node directly
            to verify receipts without
            trusting ReceiptoVerse
```

---

## Future Phases Preview

```
PHASE 1 (Current) âœ…
    HCS Receipt Anchoring
            â”‚
            â–¼
PHASE 2 (Next) ğŸš§
    HTS Reward Tokens
    â€¢ Create RVP token
    â€¢ Mint to users
    â€¢ Token transfers
            â”‚
            â–¼
PHASE 3 ğŸ”œ
    Smart Contracts
    â€¢ NFT Benefits Manager
    â€¢ Upgrade mechanics
            â”‚
            â–¼
PHASE 4 ğŸ”œ
    Event Indexer
    â€¢ Real-time sync
    â€¢ Background workers
            â”‚
            â–¼
PHASE 5 ğŸ”œ
    SDKs
    â€¢ Merchant SDK
    â€¢ Wallet SDK
    â€¢ Developer SDK
```

---

## Key Metrics Dashboard (Conceptual)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              RECEIPTOVERSE - HCS METRICS                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  ğŸ“‹ Total Receipts Anchored:        1,234,567               â”‚
â”‚  â±ï¸  Average Anchoring Time:        3.2 seconds             â”‚
â”‚  âœ… Verification Success Rate:      99.99%                  â”‚
â”‚  ğŸ’° Total Cost (Month):             $123.45                 â”‚
â”‚  ğŸ“Š Messages per Day:               41,234                  â”‚
â”‚  ğŸ”— HCS Topic ID:                   0.0.12345               â”‚
â”‚  ğŸŒ Network:                        Mainnet                 â”‚
â”‚  ğŸª Mirror Node Status:             Healthy                 â”‚
â”‚                                                              â”‚
â”‚  Recent Anchors:                                            â”‚
â”‚  â€¢ Receipt #12345 âœ… 2 sec ago                              â”‚
â”‚  â€¢ Receipt #12346 âœ… 5 sec ago                              â”‚
â”‚  â€¢ Receipt #12347 âœ… 8 sec ago                              â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Phase 1 Architecture is complete and production-ready! ğŸ‰**
